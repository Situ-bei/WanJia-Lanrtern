import{y as Le,g as h,z as A,u as e,h as W,A as He,l as he,B as Oe,C as Pe,D as Ve,E as ze,G as ge,H as Z,o as $,c as D,m as ce,w as Q,s as Y,a as O,n as P,I as J,b as X,J as q,T as ve,i as K,p as pe,K as ye,F as De,e as Re,t as Ge,L as Fe,M as Ke,N as Ue}from"./index-gE54tNIP.js";import{h as Ie,i as je,j as We,k as Ce,l as Je,E as fe,m as Xe,f as Ye,_ as _e,n as qe,w as Qe,o as Ze}from"./base-QoPSD99Y.js";import{u as xe,t as de,f as et}from"./index-pCkL8F9C.js";const tt=Ie({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),at={change:(a,u)=>[a,u].every(je)},we=Symbol("carouselContextKey"),le="ElCarouselItem",me=300,st=(a,u,g)=>{const{children:l,addChild:L,removeChild:p}=xe(ge(),le),b=Le(),s=h(-1),y=h(null),w=h(!1),I=h(),k=h(0),_=h(!0),v=h(!0),C=h(!1),R=A(()=>a.arrow!=="never"&&!e(M)),V=A(()=>l.value.some(t=>t.props.label.toString().length>0)),N=A(()=>a.type==="card"),M=A(()=>a.direction==="vertical"),n=A(()=>a.height!=="auto"?{height:a.height}:{height:`${k.value}px`,overflow:"hidden"}),o=de(t=>{E(t)},me,{trailing:!0}),f=de(t=>{z(t)},me),d=t=>_.value?s.value<=1?t<=1:t>1:!0;function m(){y.value&&(clearInterval(y.value),y.value=null)}function T(){a.interval<=0||!a.autoplay||y.value||(y.value=setInterval(()=>S(),a.interval))}const S=()=>{v.value||(C.value=!0),v.value=!1,s.value<l.value.length-1?s.value=s.value+1:a.loop?s.value=0:C.value=!1};function E(t){if(v.value||(C.value=!0),v.value=!1,Ve(t)){const H=l.value.filter(F=>F.props.name===t);H.length>0&&(t=l.value.indexOf(H[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const i=l.value.length,B=s.value;t<0?s.value=a.loop?i-1:0:t>=i?s.value=a.loop?0:i-1:s.value=t,B===s.value&&r(B),oe()}function r(t){l.value.forEach((i,B)=>{i.translateItem(B,s.value,t)})}function U(t,i){var B,H,F,re;const j=e(l),ie=j.length;if(ie===0||!t.states.inStage)return!1;const Te=i+1,Ee=i-1,ue=ie-1,Ne=j[ue].states.active,Be=j[0].states.active,$e=(H=(B=j[Te])==null?void 0:B.states)==null?void 0:H.active,Ae=(re=(F=j[Ee])==null?void 0:F.states)==null?void 0:re.active;return i===ue&&Be||$e?"left":i===0&&Ne||Ae?"right":!1}function x(){w.value=!0,a.pauseOnHover&&m()}function ee(){w.value=!1,T()}function te(){C.value=!1}function c(t){e(M)||l.value.forEach((i,B)=>{t===U(i,B)&&(i.states.hover=!0)})}function ne(){e(M)||l.value.forEach(t=>{t.states.hover=!1})}function G(t){t!==s.value&&(v.value||(C.value=!0)),s.value=t}function z(t){a.trigger==="hover"&&t!==s.value&&(s.value=t,v.value||(C.value=!0))}function ae(){E(s.value-1)}function be(){E(s.value+1)}function oe(){m(),a.pauseOnHover||T()}function ke(t){a.height==="auto"&&(k.value=t)}function Me(){var t;const i=(t=b.default)==null?void 0:t.call(b);if(!i)return null;const H=et(i).filter(F=>ze(F)&&F.type.name===le);return(H==null?void 0:H.length)===2&&a.loop&&!N.value?(_.value=!0,H):(_.value=!1,null)}W(()=>s.value,(t,i)=>{r(i),_.value&&(t=t%2,i=i%2),i>-1&&u("change",t,i)}),W(()=>a.autoplay,t=>{t?T():m()}),W(()=>a.loop,()=>{E(s.value)}),W(()=>a.interval,()=>{oe()});const se=He();return he(()=>{W(()=>l.value,()=>{l.value.length>0&&E(a.initialIndex)},{immediate:!0}),se.value=We(I.value,()=>{r()}),T()}),Oe(()=>{m(),I.value&&se.value&&se.value.stop()}),Pe(we,{root:I,isCardType:N,isVertical:M,items:l,loop:a.loop,cardScale:a.cardScale,addItem:L,removeItem:p,setActiveItem:E,setContainerHeight:ke}),{root:I,activeIndex:s,arrowDisplay:R,hasLabel:V,hover:w,isCardType:N,isTransitioning:C,items:l,isVertical:M,containerStyle:n,isItemsTwoLength:_,handleButtonEnter:c,handleTransitionEnd:te,handleButtonLeave:ne,handleIndicatorClick:G,handleMouseEnter:x,handleMouseLeave:ee,setActiveItem:E,prev:ae,next:be,PlaceholderItem:Me,isTwoLengthShow:d,throttledArrowClick:o,throttledIndicatorHover:f}},lt="ElCarousel",nt=Z({name:lt}),ot=Z({...nt,props:tt,emits:at,setup(a,{expose:u,emit:g}){const l=a,{root:L,activeIndex:p,arrowDisplay:b,hasLabel:s,hover:y,isCardType:w,items:I,isVertical:k,containerStyle:_,handleButtonEnter:v,handleButtonLeave:C,isTransitioning:R,handleIndicatorClick:V,handleMouseEnter:N,handleMouseLeave:M,handleTransitionEnd:n,setActiveItem:o,prev:f,next:d,PlaceholderItem:m,isTwoLengthShow:T,throttledArrowClick:S,throttledIndicatorHover:E}=st(l,g),r=Ce("carousel"),{t:U}=Je(),x=A(()=>{const c=[r.b(),r.m(l.direction)];return e(w)&&c.push(r.m("card")),c}),ee=A(()=>{const c=[r.e("container")];return l.motionBlur&&e(R)&&c.push(e(k)?`${r.namespace.value}-transitioning-vertical`:`${r.namespace.value}-transitioning`),c}),te=A(()=>{const c=[r.e("indicators"),r.em("indicators",l.direction)];return e(s)&&c.push(r.em("indicators","labels")),l.indicatorPosition==="outside"&&c.push(r.em("indicators","outside")),e(k)&&c.push(r.em("indicators","right")),c});return u({activeIndex:p,setActiveItem:o,prev:f,next:d}),(c,ne)=>($(),D("div",{ref_key:"root",ref:L,class:P(e(x)),onMouseenter:J(e(N),["stop"]),onMouseleave:J(e(M),["stop"])},[e(b)?($(),ce(ve,{key:0,name:"carousel-arrow-left",persisted:""},{default:Q(()=>[Y(O("button",{type:"button",class:P([e(r).e("arrow"),e(r).em("arrow","left")]),"aria-label":e(U)("el.carousel.leftArrow"),onMouseenter:G=>e(v)("left"),onMouseleave:e(C),onClick:J(G=>e(S)(e(p)-1),["stop"])},[X(e(fe),null,{default:Q(()=>[X(e(Xe))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[q,(c.arrow==="always"||e(y))&&(l.loop||e(p)>0)]])]),_:1})):K("v-if",!0),e(b)?($(),ce(ve,{key:1,name:"carousel-arrow-right",persisted:""},{default:Q(()=>[Y(O("button",{type:"button",class:P([e(r).e("arrow"),e(r).em("arrow","right")]),"aria-label":e(U)("el.carousel.rightArrow"),onMouseenter:G=>e(v)("right"),onMouseleave:e(C),onClick:J(G=>e(S)(e(p)+1),["stop"])},[X(e(fe),null,{default:Q(()=>[X(e(Ye))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[q,(c.arrow==="always"||e(y))&&(l.loop||e(p)<e(I).length-1)]])]),_:1})):K("v-if",!0),O("div",{class:P(e(ee)),style:ye(e(_)),onTransitionend:e(n)},[X(e(m)),pe(c.$slots,"default")],46,["onTransitionend"]),c.indicatorPosition!=="none"?($(),D("ul",{key:2,class:P(e(te))},[($(!0),D(De,null,Re(e(I),(G,z)=>Y(($(),D("li",{key:z,class:P([e(r).e("indicator"),e(r).em("indicator",c.direction),e(r).is("active",z===e(p))]),onMouseenter:ae=>e(E)(z),onClick:J(ae=>e(V)(z),["stop"])},[O("button",{class:P(e(r).e("button")),"aria-label":e(U)("el.carousel.indicator",{index:z+1})},[e(s)?($(),D("span",{key:0},Ge(G.props.label),1)):K("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[q,e(T)(z)]])),128))],2)):K("v-if",!0),l.motionBlur?($(),D("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[O("defs",null,[O("filter",{id:"elCarouselHorizontal"},[O("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),O("filter",{id:"elCarouselVertical"},[O("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):K("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var rt=_e(ot,[["__file","carousel.vue"]]);const it=Ie({name:{type:String,default:""},label:{type:[String,Number],default:""}}),ut=a=>{const u=Fe(we),g=ge(),l=h(),L=h(!1),p=h(0),b=h(1),s=h(!1),y=h(!1),w=h(!1),I=h(!1),{isCardType:k,isVertical:_,cardScale:v}=u;function C(n,o,f){const d=f-1,m=o-1,T=o+1,S=f/2;return o===0&&n===d?-1:o===d&&n===0?f:n<m&&o-n>=S?f+1:n>T&&n-o>=S?-2:n}function R(n,o){var f,d;const m=e(_)?((f=u.root.value)==null?void 0:f.offsetHeight)||0:((d=u.root.value)==null?void 0:d.offsetWidth)||0;return w.value?m*((2-v)*(n-o)+1)/4:n<o?-(1+v)*m/4:(3+v)*m/4}function V(n,o,f){const d=u.root.value;return d?((f?d.offsetHeight:d.offsetWidth)||0)*(n-o):0}const N=(n,o,f)=>{var d;const m=e(k),T=(d=u.items.value.length)!=null?d:Number.NaN,S=n===o;!m&&!qe(f)&&(I.value=S||n===f),!S&&T>2&&u.loop&&(n=C(n,o,T));const E=e(_);s.value=S,m?(w.value=Math.round(Math.abs(n-o))<=1,p.value=R(n,o),b.value=e(s)?1:v):p.value=V(n,o,E),y.value=!0,S&&l.value&&u.setContainerHeight(l.value.offsetHeight)};function M(){if(u&&e(k)){const n=u.items.value.findIndex(({uid:o})=>o===g.uid);u.setActiveItem(n)}}return he(()=>{u.addItem({props:a,states:Ke({hover:L,translate:p,scale:b,active:s,ready:y,inStage:w,animating:I}),uid:g.uid,translateItem:N})}),Ue(()=>{u.removeItem(g.uid)}),{carouselItemRef:l,active:s,animating:I,hover:L,inStage:w,isVertical:_,translate:p,isCardType:k,scale:b,ready:y,handleItemClick:M}},ct=Z({name:le}),vt=Z({...ct,props:it,setup(a){const u=a,g=Ce("carousel"),{carouselItemRef:l,active:L,animating:p,hover:b,inStage:s,isVertical:y,translate:w,isCardType:I,scale:k,ready:_,handleItemClick:v}=ut(u),C=A(()=>[g.e("item"),g.is("active",L.value),g.is("in-stage",s.value),g.is("hover",b.value),g.is("animating",p.value),{[g.em("item","card")]:I.value,[g.em("item","card-vertical")]:I.value&&y.value}]),R=A(()=>{const N=`${`translate${e(y)?"Y":"X"}`}(${e(w)}px)`,M=`scale(${e(k)})`;return{transform:[N,M].join(" ")}});return(V,N)=>Y(($(),D("div",{ref_key:"carouselItemRef",ref:l,class:P(e(C)),style:ye(e(R)),onClick:e(v)},[e(I)?Y(($(),D("div",{key:0,class:P(e(g).e("mask"))},null,2)),[[q,!e(L)]]):K("v-if",!0),pe(V.$slots,"default")],14,["onClick"])),[[q,e(_)]])}});var Se=_e(vt,[["__file","carousel-item.vue"]]);const ht=Qe(rt,{CarouselItem:Se}),gt=Ze(Se);export{gt as E,ht as a};
